<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>家庭服务器打通最后一公里 - 六月长河</title><meta name=author content="Kingpo"><meta name=author-link content><meta name=description content="家庭服务器折腾记"><meta name=keywords content="linux,ubuntu,home server"><meta itemprop=name content="家庭服务器打通最后一公里"><meta itemprop=description content="家庭服务器折腾记"><meta itemprop=datePublished content="2023-05-22T16:13:18+08:00"><meta itemprop=dateModified content="2023-05-22T17:13:18+08:00"><meta itemprop=wordCount content="1508"><meta itemprop=image content="https://ttzz.eu.org/logo.png"><meta itemprop=keywords content="linux,ubuntu,home server,"><meta property="og:title" content="家庭服务器打通最后一公里"><meta property="og:description" content="家庭服务器折腾记"><meta property="og:type" content="article"><meta property="og:url" content="https://ttzz.eu.org/posts/2023-05-22-home-server/"><meta property="og:image" content="https://ttzz.eu.org/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-22T16:13:18+08:00"><meta property="article:modified_time" content="2023-05-22T17:13:18+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ttzz.eu.org/logo.png"><meta name=twitter:title content="家庭服务器打通最后一公里"><meta name=twitter:description content="家庭服务器折腾记"><meta name=application-name content="六月长河"><meta name=apple-mobile-web-app-title content="六月长河"><meta name=theme-color data-light=#ffffff data-dark=#252627 content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://ttzz.eu.org/posts/2023-05-22-home-server/><link rel=prev href=https://ttzz.eu.org/posts/2023-05-10-ubuntu-su/><link rel=next href=https://ttzz.eu.org/posts/2023-05-26-nginx-http-redirect-https/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"家庭服务器打通最后一公里","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/ttzz.eu.org\/posts\/2023-05-22-home-server\/"},"image":["https:\/\/ttzz.eu.org\/site-meta.jpg"],"genre":"posts","keywords":"linux, ubuntu, home server","wordcount":1508,"url":"https:\/\/ttzz.eu.org\/posts\/2023-05-22-home-server\/","datePublished":"2023-05-22T16:13:18+08:00","dateModified":"2023-05-22T17:13:18+08:00","publisher":{"@type":"Organization","name":"Kingpo","logo":"https:\/\/ttzz.eu.org\/images\/avatar.png"},"author":{"@type":"Person","name":"Kingpo"},"description":"家庭服务器折腾记"}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title=六月长河><span class=header-title-text>六月长河</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class="menu-item text-center"><a class=menu-link href=/posts/ title=所有文章><i class='fas fa-archive fa-fw fa-sm'></i> 文章</a></li><li class="menu-item text-center"><a class=menu-link href=/categories/><i class='fas fa-th fa-fw fa-sm'></i> 分类</a></li><li class="menu-item text-center"><a class=menu-link href=/tags/><i class='fas fa-tags fa-fw fa-sm'></i> 标签</a></li><li class="menu-item text-center"><a class=menu-link href=/friends/><i class='fas fa-users fa-fw fa-sm'></i> 友链</a></li><li class="menu-item text-center"><a class=menu-link href=/about/><i class='fas fa-user-tie fa-fw fa-sm'></i> 关于</a></li><li class="menu-item text-center"><a class=menu-link href=/tool/><i class='fas fa-cube fa-fw fa-sm'></i> 工具箱</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=六月长河><span class=header-title-text>六月长河</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class="menu-item text-center"><a class=menu-link href=/posts/ title=所有文章><i class='fas fa-archive fa-fw fa-sm'></i> 文章</a></li><li class="menu-item text-center"><a class=menu-link href=/categories/><i class='fas fa-th fa-fw fa-sm'></i> 分类</a></li><li class="menu-item text-center"><a class=menu-link href=/tags/><i class='fas fa-tags fa-fw fa-sm'></i> 标签</a></li><li class="menu-item text-center"><a class=menu-link href=/friends/><i class='fas fa-users fa-fw fa-sm'></i> 友链</a></li><li class="menu-item text-center"><a class=menu-link href=/about/><i class='fas fa-user-tie fa-fw fa-sm'></i> 关于</a></li><li class="menu-item text-center"><a class=menu-link href=/tool/><i class='fas fa-cube fa-fw fa-sm'></i> 工具箱</a></li><li class="menu-item theme-switch" title><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container data-page-style=narrow><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>家庭服务器打通最后一公里</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img class="lazyload avatar" src=/svg/loading.min.svg data-src=/images/avatar.png data-srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" data-sizes=auto alt=Kingpo title=Kingpo>&nbsp;Kingpo</span></span>
<span class=post-category>收录于 <a href=/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 服务器</a></span></div><div class=post-meta-line><span title="2023-05-22 16:13:18"><i class="fa-regular fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2023-05-22>2023-05-22</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw" aria-hidden=true></i> 约 1508 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw" aria-hidden=true></i> 预计阅读 4 分钟</span>&nbsp;<span id=/posts/2023-05-22-home-server/ class="leancloud_visitors comment-visitors" data-flag-title=家庭服务器打通最后一公里>
<i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span class=leancloud-visitors-count>-</span>&nbsp;次阅读
</span>&nbsp;<span class=comment-count data-flag-title=家庭服务器打通最后一公里>
<i class="fa-regular fa-comments fa-fw" aria-hidden=true></i>&nbsp;<span data-xid=/posts/2023-05-22-home-server/ class=valine-comment-count>-</span>&nbsp;条评论
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#家庭服务器>家庭服务器</a></li><li><a href=#折腾过程>折腾过程</a><ul><li><a href=#vmware安装ubuntu>vmware安装ubuntu</a></li><li><a href=#终端工具>终端工具</a></li><li><a href=#docker>docker</a></li><li><a href=#portainer>portainer</a></li><li><a href=#青龙面板>青龙面板</a></li><li><a href=#ddns-go>ddns-go</a></li><li><a href=#nginx-proxy-manager>nginx proxy manager</a></li><li><a href=#cloudflare-tunnel>cloudflare tunnel</a></li><li><a href=#光猫和路由器>光猫和路由器</a></li><li><a href=#alist>alist</a></li><li><a href=#导航站homepagetools>导航站homepage/tools</a></li><li><a href=#zerorier和tailscale>zerorier和tailscale</a></li><li><a href=#vaultwarden>vaultwarden</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=家庭服务器>家庭服务器</h2><p>这半个多月来，用闲置的电脑和已有的家庭宽带，从wsl折腾到vmware，安装了Ubuntu系统，折腾搭建家庭服务器，安装一系列软件，折腾了无数个日夜，遇到了很多问题，并逐步解决，今天终于打通最后一公里，Nginx带端口反向代理完成，开放一个端口，其他服务通过对应不同二级或三级域名来访问，打通网络最后一公里，算是圆满了。先mark一下，接下来安排时间再细化记录。</p><h2 id=折腾过程>折腾过程</h2><h3 id=vmware安装ubuntu>vmware安装ubuntu</h3><h3 id=终端工具>终端工具</h3><h3 id=docker>docker</h3><h3 id=portainer>portainer</h3><h3 id=青龙面板>青龙面板</h3><h3 id=ddns-go>ddns-go</h3><h3 id=nginx-proxy-manager>nginx proxy manager</h3><p>Nginx Proxy Manager (NPM) 默认监听80和443端口，但如果你想修改为其他端口，如8000和9000，你需要更改NPM的配置。请按照以下步骤操作：</p><ol><li><p>首先，停止运行的Nginx Proxy Manager Docker容器：</p><p>Copy</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>docker-compose down
</span></span><span class=line><span class=cl>```
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>或者
</span></span></code></pre></td></tr></table></div></div><p>docker stop &lt;container_id></p><p>Copy</p></li><li><p>打开<code>docker-compose.yml</code>文件（如果你使用Docker Compose），或者查找启动Docker容器的命令行参数。你需要找到映射到Nginx Proxy Manager容器内的端口。</p><p>对于<code>docker-compose.yml</code>文件，它可能是这样的：</p><p>yaml</p><p>Copy</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>services:
</span></span><span class=line><span class=cl>  app:
</span></span><span class=line><span class=cl>    image: &#39;jc21/nginx-proxy-manager:2.10.3&#39;
</span></span><span class=line><span class=cl>    ports:
</span></span><span class=line><span class=cl>      - &#39;80:80&#39;
</span></span><span class=line><span class=cl>      - &#39;443:443&#39;
</span></span><span class=line><span class=cl>      - &#39;81:81&#39;
</span></span><span class=line><span class=cl>```
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>如果你是通过命令行启动容器，它可能类似于:
</span></span></code></pre></td></tr></table></div></div><p>docker run -d &ndash;name nginx-proxy-manager -p 80:80 -p 443:443 -p 81:81 jc21/nginx-proxy-manager:2.10.3</p><p>Copy</p></li><li><p>修改端口映射。将<code>80:80</code>更改为<code>8000:80</code>，将<code>443:443</code>更改为<code>9000:443</code>。对于<code>docker-compose.yml</code>文件，修改后的内容应该是这样的：</p><p>yaml</p><p>Copy</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>services:
</span></span><span class=line><span class=cl>  app:
</span></span><span class=line><span class=cl>    image: &#39;jc21/nginx-proxy-manager:2.10.3&#39;
</span></span><span class=line><span class=cl>    ports:
</span></span><span class=line><span class=cl>      - &#39;8000:80&#39;
</span></span><span class=line><span class=cl>      - &#39;9000:443&#39;
</span></span><span class=line><span class=cl>      - &#39;81:81&#39;
</span></span><span class=line><span class=cl>```
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>如果你是通过命令行启动容器，修改后的命令应该是：
</span></span></code></pre></td></tr></table></div></div><p>docker run -d &ndash;name nginx-proxy-manager -p 8000:80 -p 9000:443 -p 81:81 jc21/nginx-proxy-manager:2.10.3</p><p>Copy</p></li><li><p>重新启动Nginx Proxy Manager容器：</p><p>Copy</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>docker-compose up -d
</span></span><span class=line><span class=cl>```
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>或者
</span></span></code></pre></td></tr></table></div></div><p>docker start &lt;container_id></p><p>Copy</p></li></ol><p>现在，你的Nginx Proxy Manager应该已经在8000和9000端口上监听了。请注意，由于更改了默认端口，你需要在访问NPM的管理界面时指定新的端口。例如，如果你的服务器IP是<code>example.com</code>，请使用<code>http://example.com:8000</code>访问HTTP网站，使用<code>https://example.com:9000</code>访问HTTPS网站。</p><p>另外，当你在NPM中添加新的代理主机时，确保将“Scheme”设置为“HTTP”或“HTTPS”，根据需要将“Forward Hostname/IP”设置为目标服务器的地址，并将“Forward Port”设置为目标服务器的端口。然后，在“Custom Locations”部分，可以根据需要添加自定义重写规则、访问控制等。</p><h3 id=cloudflare-tunnel>cloudflare tunnel</h3><h3 id=光猫和路由器>光猫和路由器</h3><p>桥接/开启IPV6</p><h3 id=alist>alist</h3><h3 id=导航站homepagetools>导航站homepage/tools</h3><h3 id=zerorier和tailscale>zerorier和tailscale</h3><h3 id=vaultwarden>vaultwarden</h3><p>个人云盘</p><p>博客</p><p>vscode ssh remote</p><p>wireguard</p><p>minio
rclone webdav 服务,局域网看片真爽<br>navidrome 听歌</p><p>uptime-kuma 监控(网络延迟 /ssl 证书)<br>nocodb 快速生成 restapi<br>nsqd 轻量消息队列<br>stackedit markdown 编辑器<br>gogs 代码托管<br>portainer docker 管理<br>speedtest 局域网测速<br>miniflux Rss<br>vaultwarden 开源 bitwarden 密码服务<br>dendrite && element-web 局域网 IM<br>代理服务器用的 traefik 再也不用手写 nginx 配置了</p><p>Homarr<br>bitwardenrs<br>homeassistant<br>nextcloud<br>OnlyOffice<br>urbackup<br>chinesesubfinder<br>NocoDB<br>Gitea<br>RustDeskServer-Relay<br>RustDeskServer-Server</p><p>照片展示的：<br>hexo-blog<br>PhotoPrism<br>PhotoStructure</p><p>自动下片的：<br>Plex<br>EmbyServer<br>qbittorrent<br>overseerr<br>prowlarr<br>radarr<br>sonarr<br>tautulli
局域网文件传输：windows 用 Raidrive 通过 SFTP 挂载一块 16T 硬盘；外网访问通过端口映射；<br>其他服务大部分都是 docker 部署的：<br>Docker 容器管理：portainer<br>Nginx 反向代理：Nginx Proxy Manager<br>相册：PhotoPrism<br>浏览器端文件下载：WebDav</p><p>Bitwarden - 密码管理器；<br>Alist - 网盘；<br>Linkding - 跨平台网络书签；<br>E5-Renew - E5 自动调用 API 续期；<br>Wiznote - 为知笔记私有部署；<br>kms - 你懂得；<br>Bark - 推送；<br>Qiandao - 一个自动签到模板；<br>IPSec - 翻回家里；<br>Genshinhelper - 一个原神社区的自动签到；<br>Rustdesk - 远程控制；<br>Synology Photos - 群晖的相册服务；<br>Synology Drive - 群晖的私有网盘；<br>Synology Calendar - 群晖日历服务，每天定时发送通知到邮箱通知女朋友吃药。</p><p>seafile ，文件同步，最近感觉比群晖 Drive 好用<br>MT photos ，同步照片，感觉比较轻量，快捷，比 PhotoPrism 占用少</p><p>jellyfin媒体中心</p><p><a href=https://zhuanlan.zhihu.com/p/595775684 target=_blank rel="external nofollow noopener noreferrer">https://zhuanlan.zhihu.com/p/595775684</a></p><div class=post-promote><input type=checkbox name=promote id=promote hidden>
<label class=promote-button for=promote>关注一下有惊喜</label><div class=qr-code><label class=qr-code-image for=promote><img class=image src=/images/wxqr.png>
<span>公众号</span></label></div></div><div class=post-reward><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=/images/wechatpay.png>
<span>微信打赏</span></label>
<label class=qr-code-image for=reward><img class=image src=/images/alipay.png>
<span>支付宝打赏</span></label></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2023-05-22 17:13:18">更新于 2023-05-22&nbsp;<a class=git-hash href=https://github.com/Charlie-king/hugo-blog/commit/89a519967992c37f34c86a2bf933f2afa671a897 rel="external nofollow noopener noreferrer" target=_blank title="commit by jinbo(zhjin66@qq.com) 89a519967992c37f34c86a2bf933f2afa671a897: :pencil: 更新文章"><i class="fa-solid fa-hashtag fa-fw" aria-hidden=true></i>89a5199</a></span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/2023-05-22-home-server/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span><span><a href=https://github.com/Charlie-king/hugo-blog/edit/main/content/posts/2023-05-22%20-%20%20Home%20Server%e3%80%90%e3%80%91.md title=编辑此页 target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>编辑此页</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://ttzz.eu.org/posts/2023-05-22-home-server/ data-title=家庭服务器打通最后一公里 data-ralateuid=2296265347><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 百度" data-sharer=baidu data-url=https://ttzz.eu.org/posts/2023-05-22-home-server/ data-title=家庭服务器打通最后一公里><i data-svg-src=/lib/simple-icons/icons/baidu.min.svg aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://ttzz.eu.org/posts/2023-05-22-home-server/ data-title=家庭服务器打通最后一公里><i class="fa-brands fa-evernote fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/linux/>linux</a>,&nbsp;<a href=/tags/ubuntu/>ubuntu</a>,&nbsp;<a href=/tags/home-server/>home server</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/2023-05-10-ubuntu-su/ class=prev rel=prev title=Ubuntu输入su认证失败的解决方法><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Ubuntu输入su认证失败的解决方法</a>
<a href=/posts/2023-05-26-nginx-http-redirect-https/ class=next rel=next title=Nginx实现http和https复用1个端口的2种解决方式>Nginx实现http和https复用1个端口的2种解决方式<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=valine class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://valine.js.org/ rel="external nofollow noopener noreferrer">Valine</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom">本站多线部署：
<a href=https://charlie-king.github.io target=_blank>【github】</a>
<a href=https://ttzz.eu.org target=_blank>【cloudflare】</a>
<a href=https://zhjin.eu.org target=_blank>【vercel】</a>
<a href=https://kingpo.netlify.app/ target=_blank>【netlify】</a>
<a href=https://kpo.onrender.com/ target=_blank>【render】</a><br><a href="https://statcounter.com/p12800592/?guest=1" target=_blank>全线路总访问量统计</a>
<script type=text/javascript>var sc_project=12800592,sc_invisible=0,sc_security="6f21fa5b",scJsHost="https://";document.write("<script type='text/javascript' src='"+scJsHost+"statcounter.com/counter/counter.js'><\/script>")</script><noscript><div class=statcounter><a title="Web Analytics
Made Easy - Statcounter" href=https://statcounter.com/ target=_blank><img class=statcounter src=https://c.statcounter.com/12800592/0/6f21fa5b/0/ alt="Web Analytics Made Easy - Statcounter" referrerpolicy=no-referrer-when-downgrade></a></div></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1883399155974911" crossorigin=anonymous></script></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>Kingpo</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"><span class=site-time title=网站已持续运行这么多天啦><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i>&nbsp;<span class=run-times>网站已持续运行这么多天啦</span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label=查看评论><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/Charlie-king/charlie-king.github.io title="在 GitHub 上查看" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress-dark:top></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/valine/valine.min.css><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/valine/Valine.min.js></script><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script src=/lib/lazysizes/lazysizes.min.js async defer></script><script src=/lib/twemoji/twemoji.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:20},comment:{enable:!0,valine:{appId:"fBVoqMFU1xet9Og99sfzU2Pu-MdYXbMMI",appKey:"tdTYEKQLqjlE8Mh6tmCs2Vtz",avatar:"monsterid",el:"#valine",emojiCDN:"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/",emojiMaps:{100:"1f4af.png",alien:"1f47d.png",anger:"1f4a2.png",angry:"1f620.png",anguished:"1f627.png",astonished:"1f632.png",black_heart:"1f5a4.png",blue_heart:"1f499.png",blush:"1f60a.png",bomb:"1f4a3.png",boom:"1f4a5.png",broken_heart:"1f494.png",brown_heart:"1f90e.png",clown_face:"1f921.png",cold_face:"1f976.png",cold_sweat:"1f630.png",confounded:"1f616.png",confused:"1f615.png",cry:"1f622.png",crying_cat_face:"1f63f.png",cupid:"1f498.png",dash:"1f4a8.png",disappointed:"1f61e.png",disappointed_relieved:"1f625.png",dizzy:"1f4ab.png",dizzy_face:"1f635.png",drooling_face:"1f924.png",exploding_head:"1f92f.png",expressionless:"1f611.png",face_vomiting:"1f92e.png",face_with_cowboy_hat:"1f920.png",face_with_hand_over_mouth:"1f92d.png",face_with_head_bandage:"1f915.png",face_with_monocle:"1f9d0.png",face_with_raised_eyebrow:"1f928.png",face_with_rolling_eyes:"1f644.png",face_with_symbols_on_mouth:"1f92c.png",face_with_thermometer:"1f912.png",fearful:"1f628.png",flushed:"1f633.png",frowning:"1f626.png",ghost:"1f47b.png",gift_heart:"1f49d.png",green_heart:"1f49a.png",grimacing:"1f62c.png",grin:"1f601.png",grinning:"1f600.png",hankey:"1f4a9.png",hear_no_evil:"1f649.png",heart:"2764-fe0f.png",heart_decoration:"1f49f.png",heart_eyes:"1f60d.png",heart_eyes_cat:"1f63b.png",heartbeat:"1f493.png",heartpulse:"1f497.png",heavy_heart_exclamation_mark_ornament:"2763-fe0f.png",hole:"1f573-fe0f.png",hot_face:"1f975.png",hugging_face:"1f917.png",hushed:"1f62f.png",imp:"1f47f.png",innocent:"1f607.png",japanese_goblin:"1f47a.png",japanese_ogre:"1f479.png",joy:"1f602.png",joy_cat:"1f639.png",kiss:"1f48b.png",kissing:"1f617.png",kissing_cat:"1f63d.png",kissing_closed_eyes:"1f61a.png",kissing_heart:"1f618.png",kissing_smiling_eyes:"1f619.png",laughing:"1f606.png",left_speech_bubble:"1f5e8-fe0f.png",love_letter:"1f48c.png",lying_face:"1f925.png",mask:"1f637.png",money_mouth_face:"1f911.png",nauseated_face:"1f922.png",nerd_face:"1f913.png",neutral_face:"1f610.png",no_mouth:"1f636.png",open_mouth:"1f62e.png",orange_heart:"1f9e1.png",partying_face:"1f973.png",pensive:"1f614.png",persevere:"1f623.png",pleading_face:"1f97a.png",pouting_cat:"1f63e.png",purple_heart:"1f49c.png",rage:"1f621.png",relaxed:"263a-fe0f.png",relieved:"1f60c.png",revolving_hearts:"1f49e.png",right_anger_bubble:"1f5ef-fe0f.png",robot_face:"1f916.png",rolling_on_the_floor_laughing:"1f923.png",scream:"1f631.png",scream_cat:"1f640.png",see_no_evil:"1f648.png",shushing_face:"1f92b.png",skull:"1f480.png",skull_and_crossbones:"2620-fe0f.png",sleeping:"1f634.png",sleepy:"1f62a.png",slightly_frowning_face:"1f641.png",slightly_smiling_face:"1f642.png",smile:"1f604.png",smile_cat:"1f638.png",smiley:"1f603.png",smiley_cat:"1f63a.png",smiling_face_with_3_hearts:"1f970.png",smiling_imp:"1f608.png",smirk:"1f60f.png",smirk_cat:"1f63c.png",sneezing_face:"1f927.png",sob:"1f62d.png",space_invader:"1f47e.png",sparkling_heart:"1f496.png",speak_no_evil:"1f64a.png",speech_balloon:"1f4ac.png","star-struck":"1f929.png",stuck_out_tongue:"1f61b.png",stuck_out_tongue_closed_eyes:"1f61d.png",stuck_out_tongue_winking_eye:"1f61c.png",sunglasses:"1f60e.png",sweat:"1f613.png",sweat_drops:"1f4a6.png",sweat_smile:"1f605.png",thinking_face:"1f914.png",thought_balloon:"1f4ad.png",tired_face:"1f62b.png",triumph:"1f624.png",two_hearts:"1f495.png",unamused:"1f612.png",upside_down_face:"1f643.png",weary:"1f629.png",white_frowning_face:"2639-fe0f.png",white_heart:"1f90d.png",wink:"1f609.png",woozy_face:"1f974.png",worried:"1f61f.png",yawning_face:"1f971.png",yellow_heart:"1f49b.png",yum:"1f60b.png",zany_face:"1f92a.png",zipper_mouth_face:"1f910.png",zzz:"1f4a4.png"},enableQQ:!0,highlight:!0,lang:"zh-CN",meta:["nick","mail","link"],pageSize:10,placeholder:"欢迎交流！已开启邮箱留言通知。您所留邮箱信息不会被公开，可第一时间收到回复通知。",recordIP:!0,serverURLs:"https://le.kinpo.eu.org",visitor:!0}},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,enablePangu:!0,lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"B6R922P6DD",algoliaIndex:"dev_hugo",algoliaSearchKey:"65d9478dcc1a7a885ab0286fc7721433",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"},siteTime:"2022-07-13T19:30:34+08:00",twemoji:!0}</script><script src=/js/theme.min.js defer></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?7cb809210cfc0651ecb64a362e53bf99",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script>
<script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?2111c670794ab20de2746cf028182bbb",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?3e2c1ee7bae67fc556147b956290102f",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?62f2a79138a93ccdae1fd51bc7f41dc4",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></body></html>